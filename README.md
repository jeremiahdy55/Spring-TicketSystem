# Spring-Boot Mock Ticketing System

[ðŸ“„ Project Presentation (PDF)](https://github.com/jeremiahdy55/Spring-TicketSystem/blob/main/Ticket%20System%20Microservice%20Project%20-%20May%202025.pdf)

Project Duration: May 2025 (one month)

## Table of Contents

- [Project Overview](#1-project-overview)
- [Project Architecture](#2-project-architecture)
- [Installation, Setup, & Run](#3-installation-setup--run)
- [Learnings & Future Steps](#4-learnings--future-steps)

## 1. Project Overview
This project was designed as an introductory experience to developing microservice applications using the *Spring-Boot* framework. It models an online IT ticketing system for internal company use. Employee profiles are assigned one or more roles, each associated with possible actions and permissions:
- USER (the default employee profile)
  - Can create IT help tickets
  - Can close/reopen tickets resolved by ADMINs
  - Can view any created tickets' details, history, and status
- MANAGER
  - Can approve/reject tickets created by USERs
  - Can assign approved tickets to IT support personnel (ADMINs)
- ADMIN
  - Can resolve assigned tickets

### Example Ticket Lifecycle

Employees can submit IT help tickets, which are then reviewed by managers. At this stage, tickets may be approved or rejected. Approved tickets are assigned to IT support staff, who work to resolve the issue. Once a resolution is provided, the employee can either close the ticket if satisfied or reopen it for further action.

Throughout the ticketâ€™s lifecycle, any participating employee can view the ticketâ€™s details and complete historical record. Email notifications are automatically sent to all relevant parties whenever the ticket status changes, ensuring smooth communication and workflow.

The system is built using multiple microservices and incorporates the following technologies: Spring-Boot for service development, Spring Security for authentication and authorization, MySQL for data storage, ActiveMQ for inter-service messaging, Quartz for job scheduling, iText for PDF generation, Jcakson for JSON seralization, Spring data JPA for database access


Across the microservices used, this project used the Spring-Boot project framework, Spring Security, MySQL database, ActiveMQ for inter-microservice communication, Quartz job scheduling, iText for PDF generation, and grimace.

## 2. Project Architecture

The project consists of three microservice applications. Each microservice is coded in Java and built on the *Spring-Boot* framework. The frontend microservice (`ticketinggateway`) additionally utilizes JavaScript as part of the served `.jsp` files. The microservices and their functions can be seen here:

- [Ticketing Gateway - UI, user login & security, employee data processing](#ticketing-gateway)
- [Ticket Microservice - ticket data processing, email content generation](#ticket-microservice)
- [Notification Microservice - CRON scheduler, email sender](#notification-microservice)

### Ticketing Gateway

This service provides the UI, user login & security, and employee data processing. It implements *Spring Security* for authentication and security and *Spring Data JPA* for database access. Employees' user data is stored and accessed from the connected *MySQL* database to create/verify user accounts/credentials. Frontend webpages are served using a MVC (Model-View-Controller) design pattern and `.jsp` files styled with *Bootstrap* styling. Should the user have more than one authorized role (such as MANAGER & ADMIN), they will have access to the functionality of both roles. Creating and updating tickets are actions sent as HTTP requests to the `ticketmicroservice` application through *jQuery* calls.

### Ticket Microservice

This service provides ticket data processing and email content generation functionality. It implements *Spring Data JPA* for database access and *Jackson* for JSON serialization. Additionally, it subscribes and publishes messages to an *ActiveMQ* server embedded in `notificationmicroservice` to allow inter-service communication. Ticket data is collected from HTTP requests sent by `ticketinggateway` and saved into the connected MySQL database. It also generates email content to be sent via *JMS (Java Message Service)* to the *ActiveMQ* message broker, which would then be read by `notificationmicroservice`.  

### Notification Microservice

This service provides notification creation and sending, as well as periodic ticket status update trigger via *JMS (Java Message Service)*. It hosts the embedded *ActiveMQ* server which the `ticketmicroservice` service connects to. When up, this service will subscribe to the *ActiveMQ* server and listen for email content *JMS* messages. These messages, when consumed, would contain the email content generated by `ticketmicroservice` and trigger an email notification from the desired configured email address to be sent to the listed recipents. Additionally, a daily **CRON** job runs via a *Quartz* job scheduler. This job creates a *JMS* message that, when consumed by `ticketmicroservice` will update pending tickets to reflect a status indicating they require approval/rejection from a MANAGER.

## 3. Installation, Setup, & Run

Please ensure that there exists a local MySQL database and that you have the `username` and `password` available.

### Configuring `secrets.txt` in `/notificationmicroservice`, `/ticketmicroservice`,  & `/ticketinggateway`

- In `/notificationmicroservice/src/main/resources/secrets.txt`:
   - Replace the placeholder values with your local configuration 
      - Desired source email address (*this will be the email that email notifications are sent FROM*)
      - App password for the above email address (*similar to personal access token, generate an app password to allow your email service provider to *trust* your application)
   - Change the extension of the file from `.txt` to `.properties` (*it should be now ignored by Github!*)

- In `/ticketinggateway/src/main/resources/secrets.txt`:
   - Replace the placeholder values with your local configuration
      - Local MySQL database username/password
      - Desired email to be attached to the *master* user
        - NOTE: The *master* user is simply a user that has access to USER, MANAGER, and ADMIN functionality
   - Change the extension of the file from `.txt` to `.properties` (*it should be now ignored by Github!*)

- In `/ticketmicroservice/src/main/resources/secrets.txt`:
   - Replace the placeholder values with your local configuration 
      - Local MySQL database username/password
   - Change the extension of the file from `.txt` to `.properties` (*it should be now ignored by Github!*)

### Starting the services

For each *Spring-Boot* microservice application (`notificationmicroservice`, `ticketmicroservice`, `ticketinggateway`), open a terminal and navigate to the root directory of that MS applciation. Then, run:
```
./mvnw spring-boot:run
```
NOTE: Please start the services in this order: 
```
notificationmicroservice > ticketmicroservice > ticketinggateway
``` 
to resolve dependencies in each service.

### Accessing the Application
The frontend is accessible at `http://localhost:8383`. You may register a new user if desired. A default *master* user profile is configured with:
- username: `master`
- password: `master`

## 4. Learnings & Future Steps

### Improvements on Project Structure
 - Implement common library for dependency injection
   - Removes need for duplication of domain/entity/DTO classes
 - Decouple employee data and user-login functionality (security risk)
 - Use an external broker-server
   - Currently the *ActiveMQ* broker is embedded in the notification microservice
 - Personal preference, update from *AJAX* to more modern ways of HTTP request such as *axios* or JavaScript fetch()
 - Update to a more modern UI, such as *React*

### Improvement on Project Functionality
 - Require comments from managers upon rejecting a ticket (better for user experience)
 - In-app notifications to reduce the need to check email
 - In-app feedback from for ADMIN personel to review USER feedback
 - Implement automatic/programmatic deployment (CI/CD flow) for easier use